#Pillars Flow

<center>于鹏飞</center>

<center>2015年4月10日</center>

##CG行业概述

该项目是为了动画电影生产协作准备的，动画电影的生产是一个复杂的工作，牵涉到为数众多艺术家（100-400人左右）长期的工作（2-4年），项目规模巨大、成本高昂，高质量的生产的协同管理需求迫切。动画电影的生产过程有特征如下：

1. 高度流水线化

1. 个人工作单一

1. 需要大量的沟通 常见的沟通场景如下

	1. 向上游反馈 比如灯光部门发现动画使用简模制作的动画替换为精模后出现穿插现象（两个刚体在空间中重叠了，简模可能没有重叠但是精模跟建模的体积不一样大），他就需要反馈给动画部门，让动画部门做完小的修改后重新提交；

	1. Daily审核 艺术总监需要每经常性的对每个人的工作成果进行审核，防止制作过程出现偏差，如与前期设定不符、质量不达标（比如模型由一个个多边形组成，这些多边形边线的分布一定是按照人体肌肉的走向排列的，否则动画会很丑）等；

	1. Weekly审核 在某项任务完成后，所有人会聚集到一起对作品进行审核；

	1. 客户审核 每过一段时间需要给客户提供可以代表当前进度的视频，如模型（看模型是不是客户心中想象的样子）、拍屏（动画＋白色模型，此时没有完成材质贴图、特效、灯光，但是可以看到人物、动画和场景结合在一起的效果）、成片（完成了所有的操作，但是有些需要根据客户反馈微调）；

	1. 实时沟通 多数是进度的协调（每个人可能同时参与多个项目）、技术艺术方面的讨论（每个类型的特效都有很多种做法）和及时的反馈（发现上游有问题可能要停止工作等待修改）

##CG流水线概述
常规的CG流水线包括

1. Story board(故事板)

1. Concept(概念设计) 数据产出格式为图片 使用photoshop等软件绘制故事版、场景氛围、人物原型等，这一步确定了电影整体的艺术风格和整体的故事流程，完成这一步之后就可以确定需要制作多少镜头、每个镜头场景的物件、人物等；

1. Modeling(模型) 数据产出格式为Alembic 使用Maya、3D Max等软件制作人物、场景的大体的模型（简模），完成这一部分交给雕刻部门；

1. Sculpting(雕刻) 数据产出格式为模型或置换贴图 雕刻部门根据前期的策划，使用ZBrush等软件对简模进行雕刻，可以得到更精致的模型（精模），这时候的模型还是一个纯色的模型，完成这一部分后交给材质贴图部门、动画部门、特效部门；

1. UVing(UV展开) 数据产出格式为UV数据

1. Texturing(贴图) 数据产出格式为纹理图片 材质部门根据前期的策划，使用Maya、Mari等软件设定精模的材质（表面的反射率、高光下的表现），然后在对模型绘制贴图（如毛孔、地板的纹理、衣服的颜色等），完成贴图后交给灯光部门；

1. Rigging(绑定) 数据产出格式为Maya文件

1. Shader Writting(材质开发) 数据产出格式为材质文件

1. Shader Assignment(赋材质) 数据产出格式为Lookfile

1. Layout(财产摆放) 数据产出格式为Alembic

1. Refine(基于镜头的资产修改) 数据产出格式为Alembic

1. Animation(动画) 数据产出格式为Alembic 动画部门根据前期设定，使用建模对角色和场景设定动画，完成设定后提交给灯光部门；

1. FX(特效) 数据产出格式为Bgeo 特效部门 特效部门拿到前期设定和建模后，对场景制作相应的特效，如海洋、火焰、毛发飘飞、破碎等效果，完成后提交给灯光部门；

1. Lighting Rendering(灯光渲染) 数据产出格式为Render pass 灯光部门获得精模、动画、特效后，根据故事版在合适的位置设定光照（点光源、面光源、自然光等），使得场景看起来漂亮而自然，然后提交给合成部门；

1. Composing(合成) 数据产出格式为图像序列 合成部门拿到几组灯光部门完成的素材，比如远景的山、近景的人物，配合上一些拍摄的素材，根据前期设定调和不同来源的素材，改变各个素材的亮度、对比度等，获得最终的效果。

##非功能性需求
鉴于协同管理系统需求的特殊性，我们设计的软件具有以下特征

1. 简洁易懂的界面设计，方便艺术家快速的上手

1. 跨平台、原生版本 保证软件的高效、流畅、对移动设备友好

1. 实时的沟通 提供实时的聊天、发图片、语音、视频的沟通

1. 强大的审核机制 在任务提交需要审核的样本之后会出现在审核页面，所有的人都可以对其进行评论。

##基本概念：

1. 资产 生产出来在项目中用途较为特殊的一类媒体资源

##CGWorld community 社区的接入

目前CGWorld社区可以方便的接入的有知识库、资讯、私信、商城等，重点是赏金模块的接入，需要提供的机制有：

1. 










1. 基于节点和节点之间依赖关系的管理，每个任务就是一个节点，多个任务之间的相互依赖关系组成了一张有向无环图。节点分为两种，一种是战役（campaign)，另一种是任务mission。所谓的战役是包含一系列子任务作为子节点的任务，这一系列子节点构成了一个有向无环图。所谓的mission是不包含子节点的任务。


